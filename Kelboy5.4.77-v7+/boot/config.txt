# For more options and information see
# http://rpf.io/configtxt
# Some settings may impact device functionality. See link above for details

# uncomment if you get no picture on HDMI for a default "safe" mode
#hdmi_safe=1

overscan_scale=1
disable_overscan=0
#Actualizacion Kelboy2.0 release 1.02 con kernel 4.19.127_v7+

#Activar una vez tengamos realizado el sudo depmod -a
#kernel=Kernel5_4_77.img
###Necesita estar en off el audio base para que coja el I2S##
dtparam=audio=off

## parametros HDMI
#hdmi_force_hotplug=1
#hdmi_drive=2
#hdmi_ignore_edid=0xa5000080
#config_hdmi_boost=4
hdmi_group=2 #en 2 es como podemos selecionar el modo
hdmi_mode=82 #esto es 1080p
max_framebuffers=2

#dtoverlay=vc4-fkms-v3d
#  desktop display will default to the LCD (fb0)
# This will force the specified display to be the first in the list, i.e. /dev/fb0
# Actually this is the full set:
# MAIN_LCD  0
# AUX_LCD   1
# HDMI0     2
# SDTV      3
# HDMI1 is only availabe on RPi4
# HDMI1     7
#con esto en 0 indicando el display SDL ve los dos displays
framebuffer_priority=0 

## no hace falta rotar el HDMI
#display_hdmi_rotate=2

###### Mejoras de rendimiento a la hora de iniciar el sistema

#desactivamos el splash inicial de pi
disable_splash=1

# Set the bootloader delay to 0 seconds. The default is 1s if not specified.
boot_delay=0

# Overclock the SD Card from 50 to 100MHz, te칩ricamente ganamos el doble. En la realidad nunca se acerca a ese x2, sino m치s bien a un x1,5-1,9
# OJO, solo se puede realizar con una UHS Class 1 card como minimo
#En los test ha dado buenos resultados, igualmente esto ser치 algo que deber치 activar el usuario manualmente.
#dtparam=sd_overclock=100

## Fin de mejoras de rendimiento###


##Overscan para ajustar pantalla##
overscan_scale=1
disable_overscan=0
overscan_left=2
overscan_right=2
overscan_top=2
overscan_bottom=8

display_lcd_rotate=2

gpu_mem_256=128
gpu_mem_512=256
gpu_mem_1024=256

####### Configuracion pantalla #######
dtoverlay=dpi24
enable_dpi_lcd=1
dpi_group=2
dpi_mode=87

##Pantalla##
dpi_output_format=0x70017
hdmi_timings=320 0 8 4 0 240 0 8 4 0 0 0 0 60 0 9600000 1

#0 indica que no coja el lcd por defecto, 1 indica que la coja siempre
display_default_lcd=1

##Dt-overlays kelboy##
dtoverlay=sdio34,poll_once=off,sdio_overclock=20
dtoverlay=i2s28
##new update of kernel raspberry pi
dtoverlay=i2c1,pins_44_45=1
dtparam=i2c_arm=on
dtparam=i2c_arm_baudrate=400000
dtparam=i2c1=on

dtoverlay=max1726x
dtoverlay=hifiberry-dac
dtoverlay=i2s-mmap

##Reset de la WiFi y usb##
gpio=42=op,dh
dtoverlay=gpio-poweroff,active_low,gpiopin=42

##Backlight pantalla##
###Modo Manual a editar por el launcher cuando maneje el brillo, pero de inicio partimos con el encendido###
gpio=40=op,dh
dtoverlay=gpio-poweroff,active_low,gpiopin=40

###Modo Pwm###
#dtoverlay=pwm,pin=40,func=4

##GPIO para el power_off btn
dtoverlay=gpio-shutdown,active_low=1,gpio_pin=33,gpio_pull=up

##EEPROM##
dtoverlay=cat24m01


##########FIN DToverlay KELBOY2.0#####


[pi4]
# Enable DRM VC4 V3D driver on top of the dispmanx display stack
dtoverlay=vc4-fkms-v3d
max_framebuffers=2

[all]
#dtoverlay=vc4-fkms-v3d
